import{j as e,r as c,a as te}from"./react-b7a6f60a.js";import{c as se}from"./react-dom-fd77bcba.js";import{L as D,c as re,R as ne}from"./react-router-dom-047a5488.js";import{F as ae,a as oe,L as ie}from"./react-icons-b5ac9b7f.js";import{T as z,d as J,S as ce,C as le,A as de,B as S,a as G,b as ue,c as H,e as X,I as he,f as me,D as Y,g as V,h as pe,i as fe,j as I,Z as K,k as xe,l as ge,m as je,F as T,n as E,o as $,p as ye,M as Z,q as ve,r as be,s as Ce,t as W,u as ke,L as Se}from"./@mui-edfcb868.js";import{u as w,a as N,P as we}from"./react-redux-ebf073d2.js";import{c as B,a as F,b as Ne}from"./@reduxjs-f3e3d343.js";import"./hoist-non-react-statics-23d96a9a.js";import{c as U,O as Oe,f as Te}from"./react-router-9f9e2f16.js";import{C as De}from"./react-circular-progressbar-16b4bc08.js";import{a as _e}from"./axios-c24e582b.js";import"./@babel-d5f85e80.js";import"./scheduler-765c72db.js";import"./@remix-run-f96eec5b.js";import"./clsx-1229b3e0.js";import"./@popperjs-f3391c26.js";import"./@emotion-d0021b0e.js";import"./stylis-79144faa.js";import"./react-transition-group-f119149f.js";import"./use-sync-external-store-d5bcb6c0.js";import"./immer-41fd5235.js";import"./redux-507b7e15.js";import"./redux-thunk-ef899f4c.js";import"./react-is-e8e5dbb3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();const Ee=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"category-header",children:"CATEGORIES"}),e.jsx(D,{className:"category-link",to:"stocked/chemicals",children:"Chemicals"}),e.jsx(D,{className:"category-link",to:"services",children:"Services"}),e.jsx(D,{className:"category-link",to:"stockTake",style:{display:"none"},children:"FifoTool"}),e.jsx(D,{className:"category-link",to:"offers",children:e.jsx(z,{title:e.jsx(J,{fontSize:"small"}),placement:"right",children:e.jsx("span",{children:"Specials"})})}),e.jsx(D,{className:"category-link",to:"delivery-notes",style:{display:"block"},children:e.jsx(z,{title:e.jsx(J,{fontSize:"small"}),placement:"right",children:e.jsx("span",{children:"D_Notes"})})})]}),P=s=>{const t=new Date(s),n=t.getDate(),o=t.getMonth()+1,a=t.getFullYear();let r="",i="";switch(o){case 1:{i="Jan";break}case 2:{i="Feb";break}case 3:{i="Mar";break}case 4:{i="Apr";break}case 5:{i="May";break}case 6:{i="Jun";break}case 7:{i="Jul";break}case 8:{i="Aug";break}case 9:{i="Sept";break}case 10:{i="Oct";break}case 11:{i="Nov";break}case 12:{i="Dec";break}default:{i="";break}}if(n===11||n===12||n===13)return{day:n,monthInWord:i,year:a,superString:"th"};switch(String(n).length>1?parseInt(String(n)[1]):n){case 1:{r="st";break}case 0:{r="th";break}case 2:{r="nd";break}case 3:{r="rd";break}case 4:{r="th";break}case 5:{r="th";break}case 6:{r="th";break}case 7:{r="th";break}case 8:{r="th";break}case 9:{r="th";break}default:{r="";break}}return{day:n,monthInWord:i,year:a,superString:r}},$e=s=>s.reverse(),k="https://stt-server.onrender.com",Fe=async()=>{const t=await(await fetch(`${k}/api/stocked/products`,{credentials:"include"})).json();return console.log(t.length),t},Ie=async()=>(await fetch(k+"/api/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})).status,Le=async(s,t)=>{const n=JSON.stringify({email:s,password:t});try{const o=await fetch(k+"/api/login",{method:"POST",credentials:"include",body:n,headers:{"Content-Type":"application/json"}}),a=await o.json(),r=o.status;return{status:a,statusCode:r}}catch{return{status:{name:void 0},statusCode:404}}},Be=async()=>{try{return await(await fetch(`${k}/api/stocked/logs`,{credentials:"include"})).json()}catch(s){return console.error(s),{}}},Pe=async()=>{try{const t=await(await fetch(`${k}/api/current/offers`,{credentials:"include"})).json();return t.message==="Unauthorized"?[]:t}catch(s){return console.error(s.message),[]}},Ae=async s=>{const{product_code:t,product_description:n,image_link:o,product_link:a,validity:r,discount_condition:i,discount:u}=s;s=r!==""?s:{product_code:t,product_description:n,image_link:o,product_link:a,validity:"1995-01-01",discount_condition:i,discount:u};try{return await(await fetch(`${k}/api/current/addOffer`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()}catch(x){return console.error(x.message),"Error"}},Re=async()=>{try{const t=await(await fetch(`${k}/api/delivery/dns`,{credentials:"include"})).json();return t.message==="Unauthorized"?[]:$e(t)}catch(s){return console.error(s),[]}},Me=async()=>{try{return await(await fetch(`${k}/api/user`,{credentials:"include"})).json()}catch(s){console.error(s.message)}},Ue=()=>{window.onscroll=function(){s()};function s(){const n=document.getElementById("top");(document.body.scrollTop>20||document.documentElement.scrollTop>20)&&(window.location.hash==="#/stocked/chemicals"||window.location.hash==="#/delivery-notes")?n.style.display="block":n.style.display="none"}function t(){document.body.scrollTop=0,document.documentElement.scrollTop=0}return e.jsx("button",{className:"top",id:"top",onClick:t,children:"TOP"})},qe=B({name:"user",initialState:{user:"IBTZ"},extraReducers(s){s.addCase(C.fulfilled,(t,n)=>{console.log("called fetch User fx"),t.user=n.payload})}}),C=F("user/fetchUser",Me),We=qe.reducer,ze=()=>{const s=w(o=>o.user.user),t=N(),n=s.user||"IBTZ";return c.useEffect(()=>{t(C())},[t,C]),e.jsx(ce,{direction:"row",spacing:3,children:e.jsx(le,{avatar:e.jsx(de,{children:n[0]}),label:n,color:n==="IBTZ"?"error":"success"})})},Je=()=>{const[s,t]=c.useState(!0),n=N(),o=U(),a=()=>{document.getElementById("drawer").style.width="0"},r=()=>{document.getElementById("drawer").style.width="11rem"},i=async()=>{const u=await Ie();console.log(u),u===200?(n(C()),o("/login")):console.log(u.statusText)};return c.useEffect(()=>{n(C()),setTimeout(()=>{t(!1)},500)},[n,o]),e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("div",{className:"menu",onClick:r,children:e.jsx(ae,{className:"home-icon"})}),e.jsxs("div",{className:"header-right-navbar",children:[e.jsx(D,{to:"login",className:"demo-link",children:e.jsx(S,{variant:"outlined",sx:{color:"white",border:"none"},children:"LOGIN"})}),e.jsx(S,{variant:"outlined",sx:{color:"white",border:"none"},onClick:i,children:"LOGOUT"}),e.jsx(ze,{})]})]}),e.jsxs("main",{className:"main",children:[e.jsxs("div",{className:"drawer",id:"drawer",autoFocus:!0,children:[e.jsx("div",{className:"close-btn",onClick:a,children:e.jsx(oe,{})}),e.jsx("div",{className:"categories",children:e.jsx(Ee,{})})]}),e.jsxs("div",{className:"main-content",id:"main",children:[s?e.jsx("p",{style:{color:"red"},children:"Redirecting to home in 1s ..."}):e.jsx(Oe,{}),e.jsx(Ue,{})]})]}),e.jsx("footer",{className:"footer",children:"All rights reserved"})]})};const Ze=()=>{const s=Te();return e.jsxs("div",{id:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:e.jsx("i",{children:s.statusText||s.message})}),e.jsx(D,{to:"/",children:e.jsx("button",{className:"return-home",children:"HOME"})})]})};const Ge=B({name:"chemicals",initialState:{chemicals:[],status:"idle",error:"",lastUpdated:{}},reducers:{},extraReducers(s){s.addCase(A.pending,t=>{t.status="loading"}).addCase(A.fulfilled,(t,n)=>{t.status="succeeded",n.payload.message=="No data"?t.chemicals=[]:t.chemicals=n.payload}).addCase(A.rejected,(t,n)=>{t.status="failed",t.error=n.error.message}).addCase(R.pending,t=>{t.lastUpdated={}}).addCase(R.fulfilled,(t,n)=>{t.lastUpdated={...n.payload}}).addCase(R.rejected,t=>{t.lastUpdated={}})}}),He=Ge.reducer,A=F("chemicals/fetchData",Fe),R=F("chemicals/fetchCurrentStockLogs",Be),Xe=({searchTerm:s,setSearchTerm:t})=>{const n=N(),o=w(r=>r.chemicals.lastUpdated),a=new Date(o.changed_on);return c.useEffect(()=>{n(R())},[n]),e.jsxs("div",{className:"instructions",children:[e.jsxs("div",{className:"fore-ground",children:[e.jsx("p",{children:"All chemicals belong to a specific box, each box has a unique box number (look below in Box Number)."}),e.jsxs("p",{children:["PLEASE NOTE: When you remove a chemical in the box, you have to record, the ",e.jsx("b",{children:"catalog number"})," of the chemical and ",e.jsx("b",{children:"quantity"})," ","taken out."]})]}),e.jsxs("div",{className:"logs fore-ground",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Updated on: "}),e.jsx("span",{className:"logs-color",children:`${a.getDate()}/${a.getMonth()+1}/${a.getFullYear()}`})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Updated by: "}),e.jsx("span",{className:"logs-color",children:`${o.name}`})]}),e.jsx("hr",{}),e.jsx("form",{action:"",className:"search-form",children:e.jsx("input",{type:"text",id:"search-field",className:"search-field",placeholder:"Enter keyword -- ethanol --",value:s,onChange:r=>t(r.target.value)})})]})]})};const Ye=({message:s})=>e.jsxs("div",{className:"circularProgress",children:[e.jsx(G,{sx:{color:"inherit"}}),e.jsx("h4",{className:"cp_text",children:s})]}),Ve=()=>{const[s,t]=c.useState(""),n=N(),o=w(r=>r.chemicals.chemicals),a=w(r=>r.chemicals.status);return c.useEffect(()=>{a==="idle"&&n(A())},[n,a]),e.jsxs("div",{className:"table",children:[e.jsx(Xe,{searchTerm:s,setSearchTerm:t}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Store"}),e.jsx("th",{children:"Box"})]})}),e.jsx("tbody",{children:o.length<=0?e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]}):o.filter(r=>s.toLowerCase()===""?!0:r.product_description.toLowerCase().includes(s.toLowerCase())).map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.product_code}),e.jsx("td",{children:r.product_description}),e.jsx("td",{style:{textAlign:"center"},children:r.qty_instock}),e.jsx("td",{style:{textAlign:"center"},children:r.store_location}),e.jsx("td",{style:{textAlign:"center"},children:r.box_number})]},r.product_code))})]}),a==="loading"?e.jsx(Ye,{message:"Fetching data from server, this may take few minutes"}):e.jsx(e.Fragment,{})]})},Ke=B({name:"upload",initialState:{upload:!0},reducers:{toggleOnOff(s,t){s.upload=t.payload}}}),Qe=Ke.reducer,et=[{product_description:"Mastercycler® X50 - PCR Thermocycler",product_code:"6303000010",discount:"20",discount_condition:"Offer valid until ",validity:"30 Dec 2024",img_link:"https://www.eppendorf.com/product-media/img/global/233332/Eppendorf_PCR_Mastercycler-X50s_product.jpg?imwidth=540",product_link:"https://www.eppendorf.com/za-en/eShop-Products/PCR/Thermocyclers/Mastercycler-X50-p-PF-217186"}],Q=B({name:"offers",initialState:{currentOffers:et,status:""},reducers:{getOffers(s){s.currentOffers=s.currentOffers},addNewOffer(s,t){s.currentOffers=[...s.currentOffers,t.payload]},updateExistingOffer(s,t){s.currentOffers.find(o=>o.product_code===t.payload.product_code)||console.log("product does not exist")}},extraReducers(s){s.addCase(M.fulfilled,(t,n)=>{t.status="success",t.currentOffers=n.payload}).addCase(ee.fulfilled,(t,n)=>{t.status=n.payload})}}),M=F("offers/fetchOffers",Pe),ee=F("offers/addNewOffer",Ae),{getOffers:tt,addNewOffer:Mt,updateExistingOffer:Ut}=Q.actions,st=Q.reducer,rt=B({name:"deliveries",initialState:{dns:[],status:""},reducers:{},extraReducers(s){s.addCase(L.pending,(t,n)=>{t.status="loading"}).addCase(L.fulfilled,(t,n)=>{t.dns=n.payload}).addCase(L.rejected,(t,n)=>{t.dns=[...t.dns],t.status="fail"})}}),L=F("deliveries/fetchDns",Re),nt=rt.reducer,at=Ne({reducer:{chemicals:He,upload:Qe,offers:st,dns:nt,user:We}});const ot=({message:s=""})=>e.jsx("div",{children:e.jsxs(ue,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:!0,children:[e.jsxs("h1",{className:"backdrop-message",children:[s,"  "]}),s===""?e.jsx(G,{color:"inherit"}):e.jsx(e.Fragment,{})]})}),it=()=>{const[s,t]=c.useState(""),[n,o]=c.useState(""),[a,r]=c.useState(!1),[i,u]=c.useState(!1),[x,h]=c.useState(""),[O,m]=c.useState(""),d=U(),g=N(),_=async v=>{v.preventDefault(),r(!a);const{status:y,statusCode:l}=await Le(n,s);y.name&&l===200?(r(a),g(C()),setTimeout(()=>{d(-1)},1e3*2),m("success"),u(!0),h("Authenticated successfully")):(r(a),m("error"),u(!0),h("Incorrect credentials"))},j=(v,y)=>{y!=="clickaway"&&u(!1)};return e.jsxs("div",{className:"login",children:[a?e.jsx(ot,{message:"let's sign you in ..."}):e.jsx(e.Fragment,{}),e.jsx("h1",{className:"login-header",children:"enter your credentials below.."}),e.jsxs("form",{action:"",method:"post",className:"login-form",onSubmit:_,children:[e.jsx("input",{type:"email",placeholder:"Enter email",id:"email",name:"email",className:"input-field",value:n,onChange:v=>o(v.target.value),required:!0,autoComplete:"email"}),e.jsx("input",{type:"password",placeholder:"password",id:"password",name:"password",className:"input-field",value:s,onChange:v=>t(v.target.value),required:!0}),e.jsx("button",{className:"logon-btn",type:"submit",children:"LOGIN"})]}),e.jsx("div",{children:e.jsx(H,{open:i,autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:j,children:e.jsx(X,{onClose:j,severity:O,variant:"filled",sx:{width:"100%"},children:x})})})]})};const ct=()=>e.jsx("div",{className:"register",children:"Only admin can login at the moment .."});const lt=["TARI","GCLA","TMDA","TRA","JML","NM-AIST","TBS"],dt=()=>{const[s,t]=c.useState(""),n=o=>{o.preventDefault();const a=new FormData(o.target),r=a.get("institute"),i=a.get("letter_resolution");if(r==="Click to select")alert("please select a correct institution name");else{console.log(i);const u=i==="l"?`IBTA/${new Date().getFullYear()}/LTNO-${new Date().getDate()}.${new Date().getMonth()}./${r}`:"IBTZ168";setTimeout(()=>{t(u),document.querySelector("#generateBtn").disabled=!0,console.log(document.querySelector("#generateBtn").disabled)},1e3),setTimeout(()=>{document.querySelector("#generateBtn").disabled=!1,t("")},1*60*1e3)}};return e.jsx("div",{className:"services",children:e.jsxs("form",{onSubmit:n,className:"services_form",children:[e.jsx("div",{className:"institution",children:e.jsxs("label",{htmlFor:"institute",children:["Select institution from list",e.jsxs("select",{name:"institute",id:"institute",className:"services_select",children:[e.jsx("option",{defaultValue:"Click to select",children:"Click to select"}),lt.map((o,a)=>e.jsx("option",{value:o,required:!0,children:o},a))]})]})}),e.jsxs("div",{className:"reff_type",children:[e.jsxs("label",{htmlFor:"letter",children:[e.jsx("input",{type:"radio",name:"letter_resolution",id:"letter",required:!0,value:"l"}),"Letter"]}),e.jsxs("label",{htmlFor:"resolution",children:[e.jsx("input",{type:"radio",name:"letter_resolution",id:"resolution",value:"r",required:!0}),"Resolution number"]})]}),s!==""?e.jsx("div",{className:"result_box",children:s}):e.jsx("div",{className:"result_box",hidden:!0}),e.jsx("button",{type:"submit",id:"generateBtn",className:"services_button",children:"Generate"})]})})};const ut=({open:s,setfdbOpen:t,fdbMessage:n})=>{const o=(r,i)=>{i!=="clickaway"&&t(!1)},a=e.jsx(e.Fragment,{children:e.jsx(he,{size:"small","aria-label":"close",color:"inherit",onClick:o,children:e.jsx(me,{fontSize:"small"})})});return e.jsx("div",{children:e.jsx(H,{open:s,autoHideDuration:5e3,onClose:o,action:a,children:e.jsx(X,{onClose:o,severity:n==="Record Exists!!"?"warning":"success",variant:"filled",sx:{width:"100%"},children:n})})})},ht=()=>{const[s,t]=c.useState(!1),[n,o]=c.useState(!0),[a,r]=c.useState(0),[i,u]=c.useState(""),[x,h]=c.useState(!1),[O,m]=c.useState(""),d=N(),g=U(),_=w(l=>l.dns.dns),j=w(l=>l.user.user).user,v=async l=>{const b=new FormData;for(const p of l.files)b.append("files",p);try{_e.post(`${k}/api/delivery/notes`,b,{withCredentials:!0,onUploadProgress:p=>{const q=Math.round(p.loaded*100/p.total);o(!1),r(q-3)}}).then(p=>{p.status===200&&p.data.message!=="Record Exists!!"?(r(100),m("Upload Successfully!"),h(!0)):(m(`${p.data.message}`),h(!0),r(0)),t(!s),o(!0),r(0)}).catch(p=>console.log(p))}catch(p){console.log("Something went wrong!",p.message)}},y=async()=>{const l=document.getElementById("fileId");l.files.length===1&&(v(l),d(L()))};return c.useEffect(()=>{d(L())},[d]),c.useLayoutEffect(()=>{if(d(C()),j==="IBTZ")return g("/login")},[d,g,j]),e.jsxs("div",{children:[e.jsx(ut,{open:x,setfdbOpen:h,fdbMessage:O}),e.jsx("div",{style:{position:"absolute"},children:e.jsxs(Y,{anchor:"bottom",open:s,children:[e.jsx("div",{className:"deliveryNoteHeader"}),e.jsx(V,{sx:{"& .MuiTextField-root":{m:1,width:"30rem"},width:"100%",height:"100%",top:"7rem",padding:"1.5rem"},component:"form",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-around",justifyItems:"center"},children:[e.jsx(pe,{type:"file",id:"fileId",required:!0,accept:"*.pdf"}),e.jsx(S,{variant:"contained",color:"success",component:"span",size:"large",onClick:y,startIcon:e.jsx(fe,{}),disabled:!n,children:"Upload"}),e.jsx("button",{style:{position:"absolute",top:"1rem",right:"1rem",backgroundColor:"black",color:"white",borderRadius:"50%"},onClick:l=>{l.preventDefault(),t(!s),r(0),o(!0)},type:"submit",disabled:!n,children:"X"}),e.jsx("div",{style:{width:100,height:100},children:e.jsx(De,{value:a,text:`${a}%`})})]})})]})}),e.jsxs("form",{action:"",name:"searchBar",className:"search-dn",children:[e.jsx(S,{variant:"outlined",sx:{margin:"0.2rem",fontWeight:"bold"},onClick:()=>t(!s),color:"success",children:"Add New"}),e.jsx("input",{type:"text",style:{fontSize:"1rem"},placeholder:"Enter keyword -- DN name --",value:i,onChange:l=>u(l.target.value)})]}),_.length===0?e.jsxs(e.Fragment,{children:[e.jsx(I,{variant:"text",animation:"wave",width:"70%",height:"5rem",sx:{fontSize:"1rem",margin:"0 auto"}}),e.jsx(I,{variant:"text",animation:"wave",width:"70%",height:"5rem",sx:{fontSize:"1rem",margin:"0 auto"}}),e.jsx(I,{variant:"text",animation:"wave",width:"70%",height:"5rem",sx:{fontSize:"1rem",margin:"0 auto"}}),e.jsx(I,{variant:"text",animation:"wave",width:"70%",height:"5rem",sx:{fontSize:"1rem",margin:"0 auto"}}),e.jsx(I,{variant:"text",animation:"wave",width:"70%",height:"5rem",sx:{fontSize:"1rem",margin:"0 auto"}})]}):_.filter(l=>i.toLowerCase()===""?!0:l.filename.toLowerCase().includes(i.toLowerCase())).map((l,b)=>e.jsx(K,{in:!0,style:{transitionDelay:`${b*50}ms`},children:e.jsxs("div",{className:"files_data",children:[e.jsx("div",{children:e.jsx("b",{children:l.filename})}),e.jsxs("div",{className:"files_data-actions",children:[e.jsxs("span",{children:[`${P(l.uploaddate).day}`,e.jsx("sup",{children:`${P(l.uploaddate).superString}`}),` ${P(l.uploaddate).monthInWord}`,` ${P(l.uploaddate).year}`]}),e.jsx("a",{href:`${l.viewlink}`,target:"_blank",rel:"noreferrer",children:e.jsx(xe,{})}),e.jsx("a",{href:`${l.downloadlink}`,children:e.jsx(ge,{})}),e.jsx("span",{children:e.jsx("button",{type:"submit",id:l.fileid,disabled:!0,children:e.jsx(je,{})})})]})]})},b))]})};function mt({pCodeToEdit:s,open:t,setOpen:n,editState:o,setEdit:a}){const[r,i]=c.useState(""),[u,x]=c.useState(""),[h,O]=c.useState(""),[m,d]=c.useState(""),[g,_]=c.useState(""),[j,v]=c.useState(""),[y,l]=c.useState(""),b=N(),p=()=>{u&&r&&h&&m&&j&&y&&b(ee({product_description:r,product_code:u,discount:h,discount_condition:m,validity:g,image_link:j,product_link:y})),b(M()),n(!t)},q=()=>{u&&r&&h&&m&&j&&y&&b(updateExistingOffer({product_description:r,product_code:u,discount:h,discount_condition:m,validity:g,image_link:j,product_link:y})),b(tt()),n(!t),a(!o)};return e.jsx("div",{style:{position:"absolute"},children:e.jsxs(Y,{anchor:"right",open:t,onClose:()=>n(!t),children:[e.jsx("div",{className:"head-cover",children:e.jsx("p",{children:"ADD NEW OFFER"})}),e.jsx(V,{sx:{"& .MuiTextField-root":{m:1,width:"25ch"},minWidth:"30rem",height:"100%",top:"4rem",padding:"1.5rem"},component:"form",children:e.jsxs("div",{className:"input-fields-container",children:[e.jsxs(T,{variant:"standard",sx:{m:1,minWidth:"100%"},children:[e.jsx(E,{htmlFor:"product_description",required:!0,children:"product_Description"}),e.jsx($,{id:"product_description","aria-describedby":"product_description-input-field",type:"text",value:r,onChange:f=>i(f.target.value)})]}),e.jsxs(T,{variant:"standard",sx:{m:1,minWidth:"100%"},children:[e.jsx(E,{htmlFor:"item-code",required:!0,children:"Item Code"}),e.jsx($,{id:"item-code","aria-describedby":"item-code-input-field",type:"text",value:u,onChange:f=>x(f.target.value)})]}),e.jsxs(T,{variant:"standard",sx:{m:1,minWidth:"100%"},children:[e.jsx(E,{htmlFor:"discount",required:!0,children:"Discount"}),e.jsx($,{id:"discount","aria-describedby":"discount-input-field",type:"number",value:h,onChange:f=>O(f.target.value)})]}),e.jsxs(T,{variant:"standard",sx:{m:1,minWidth:"100%"},children:[e.jsx(E,{id:"silvester",required:!0,children:"Discount Condition"}),e.jsxs(ye,{labelId:"silvester",id:"silvester",label:"condition",value:m,onChange:f=>d(f.target.value),children:[e.jsx(Z,{value:"Offer valid until",children:"Offer valid untill"}),e.jsx(Z,{value:"While stock last",children:"While stock last"})]})]}),e.jsx(T,{variant:"standard",sx:{m:1,minWidth:"100%"},children:e.jsx($,{id:"validity","aria-describedby":"validity-input-field",type:"date",value:g,onChange:f=>_(f.target.value),disabled:m==="While stock last"})}),e.jsxs(T,{variant:"standard",sx:{m:1,minWidth:"100%"},children:[e.jsx(E,{htmlFor:"image-address",required:!0,children:"Image Address"}),e.jsx($,{id:"image-address","aria-describedby":"image-address-input-field",type:"text",value:j,onChange:f=>v(f.target.value)})]}),e.jsxs(T,{variant:"standard",sx:{m:1,minWidth:"100%"},children:[e.jsx(E,{htmlFor:"product-link",required:!0,children:"Product Link"}),e.jsx($,{id:"product-link","aria-describedby":"product-link-input-field",type:"text",value:y,onChange:f=>l(f.target.value)})]}),o?e.jsx(S,{variant:"outlined",sx:{margin:"1rem",fontWeight:"bold"},color:"secondary",onClick:q,children:"Save Changes"}):e.jsx(S,{variant:"outlined",sx:{margin:"1rem",fontWeight:"bold"},onClick:p,color:"secondary",children:"SUBMIT"})]})}),e.jsx("div",{className:"head-cover-footer"})]})})}function pt(){const[s,t]=c.useState(!1),[n,o]=c.useState(""),[a,r]=c.useState(!1),i=N(),u=U(),x=c.useRef(),h=w(d=>d.offers.currentOffers),O=w(d=>d.user.user).user,m=()=>{o(x.current.innerText),t(!s),r(!0)};return c.useLayoutEffect(()=>{if(i(M()),i(C()),O==="IBTZ")return u("/login")},[i,M,C]),e.jsxs("div",{className:"offers-container",children:[h.map((d,g)=>e.jsx(K,{in:!0,style:{transitionDelay:`${g*400+800}ms`},children:e.jsxs(ve,{sx:{maxWidth:345},children:[e.jsx(be,{component:"img",alt:"product img",height:"auto",image:d.image_link}),e.jsxs(Ce,{children:[e.jsx(W,{gutterBottom:!0,variant:"h5",component:"div",children:d.product_description}),e.jsxs(W,{gutterBottom:!0,variant:"p",component:"div",children:["Cat. no: ",e.jsx("span",{ref:x,children:d.product_code}),"."]}),e.jsxs(W,{variant:"body2",color:"text.secondary",sx:{marginTop:"1rem"},children:["Now available with ",e.jsxs("b",{children:[d.discount,"% Discount"]}),".",e.jsx("span",{children:d.validity===""?` ${d.discount_condition} `:` ${d.discount_condition} ${new Date(d.validity).getDate()}/${new Date(d.validity).getMonth()+1}/${new Date(d.validity).getFullYear()} `})]})]}),e.jsxs(ke,{children:[e.jsx(S,{size:"small",onClick:m,children:"Edit"}),e.jsx(S,{size:"small",children:e.jsx(Se,{href:d.product_link,underline:"hover",target:"blank",children:"Learn more"})})]})]})},g)),e.jsx(mt,{open:s,setOpen:t,editState:a,setEdit:r,pCodeToEdit:n}),e.jsx("div",{className:"offer-add-new",children:e.jsxs("button",{onClick:()=>{t(!s),r(!1)},children:[e.jsx(ie,{})," NEW"]})})]})}const ft=re([{path:"/",element:e.jsx(Je,{}),errorElement:e.jsx(Ze,{}),children:[{path:"services",element:e.jsx(dt,{})},{path:"stocked/chemicals",element:e.jsx(Ve,{})},{path:"login",element:e.jsx(it,{})},{path:"register",element:e.jsx(ct,{})},{path:"delivery-notes",element:e.jsx(ht,{})},{path:"offers",element:e.jsx(pt,{})}]}]);se.createRoot(document.getElementById("root")).render(e.jsx(te.StrictMode,{children:e.jsx(we,{store:at,children:e.jsx(ne,{router:ft})})}));
