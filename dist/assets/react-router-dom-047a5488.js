import{r,R as z}from"./react-b7a6f60a.js";import{R as M}from"./react-dom-fd77bcba.js";import{m as N,D as K,a as A,R as B,u as W,N as G,b as X,c as Y,d as q,e as J}from"./react-router-9f9e2f16.js";import{c as Q,b as Z,E as $,s as ee,d as U}from"./@remix-run-f96eec5b.js";/**
 * React Router DOM v6.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C(){return C=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},C.apply(this,arguments)}function te(e,n){if(e==null)return{};var t={},a=Object.keys(e),i,s;for(s=0;s<a.length;s++)i=a[s],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}function ne(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ie(e,n){return e.button===0&&(!n||n==="_self")&&!ne(e)}const re=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function Se(e,n){return Q({basename:n==null?void 0:n.basename,future:C({},n==null?void 0:n.future,{v7_prependBasename:!0}),history:Z({window:n==null?void 0:n.window}),hydrationData:(n==null?void 0:n.hydrationData)||ae(),routes:e,mapRouteProperties:N,window:n==null?void 0:n.window}).initialize()}function ae(){var e;let n=(e=window)==null?void 0:e.__staticRouterHydrationData;return n&&n.errors&&(n=C({},n,{errors:se(n.errors)})),n}function se(e){if(!e)return null;let n=Object.entries(e),t={};for(let[a,i]of n)if(i&&i.__type==="RouteErrorResponse")t[a]=new $(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let u=new s(i.message);u.stack="",t[a]=u}catch{}}if(t[a]==null){let s=new Error(i.message);s.stack="",t[a]=s}}else t[a]=i;return t}const oe=r.createContext({isTransitioning:!1}),le=r.createContext(new Map),ue="startTransition",O=z[ue],ce="flushSync",D=M[ce];function fe(e){O?O(e):e()}function _(e){D?D(e):e()}class de{constructor(){this.status="pending",this.promise=new Promise((n,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",n(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}}function Te(e){let{fallbackElement:n,router:t,future:a}=e,[i,s]=r.useState(t.state),[u,m]=r.useState(),[f,o]=r.useState({isTransitioning:!1}),[c,v]=r.useState(),[d,T]=r.useState(),[w,x]=r.useState(),b=r.useRef(new Map),{v7_startTransition:k}=a||{},L=r.useCallback(l=>{k?fe(l):l()},[k]),h=r.useCallback((l,g)=>{let{deletedFetchers:p,unstable_flushSync:P,unstable_viewTransitionOpts:R}=g;p.forEach(S=>b.current.delete(S)),l.fetchers.forEach((S,H)=>{S.data!==void 0&&b.current.set(H,S.data)});let V=t.window==null||typeof t.window.document.startViewTransition!="function";if(!R||V){P?_(()=>s(l)):L(()=>s(l));return}if(P){_(()=>{d&&(c&&c.resolve(),d.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:R.currentLocation,nextLocation:R.nextLocation})});let S=t.window.document.startViewTransition(()=>{_(()=>s(l))});S.finished.finally(()=>{_(()=>{v(void 0),T(void 0),m(void 0),o({isTransitioning:!1})})}),_(()=>T(S));return}d?(c&&c.resolve(),d.skipTransition(),x({state:l,currentLocation:R.currentLocation,nextLocation:R.nextLocation})):(m(l),o({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}))},[t.window,d,c,b,L]);r.useLayoutEffect(()=>t.subscribe(h),[t,h]),r.useEffect(()=>{f.isTransitioning&&!f.flushSync&&v(new de)},[f]),r.useEffect(()=>{if(c&&u&&t.window){let l=u,g=c.promise,p=t.window.document.startViewTransition(async()=>{L(()=>s(l)),await g});p.finished.finally(()=>{v(void 0),T(void 0),m(void 0),o({isTransitioning:!1})}),T(p)}},[L,u,c,t.window]),r.useEffect(()=>{c&&u&&i.location.key===u.location.key&&c.resolve()},[c,d,i.location,u]),r.useEffect(()=>{!f.isTransitioning&&w&&(m(w.state),o({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),x(void 0))},[f.isTransitioning,w]);let y=r.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:l=>t.navigate(l),push:(l,g,p)=>t.navigate(l,{state:g,preventScrollReset:p==null?void 0:p.preventScrollReset}),replace:(l,g,p)=>t.navigate(l,{replace:!0,state:g,preventScrollReset:p==null?void 0:p.preventScrollReset})}),[t]),E=t.basename||"/",j=r.useMemo(()=>({router:t,navigator:y,static:!1,basename:E}),[t,y,E]);return r.createElement(r.Fragment,null,r.createElement(K.Provider,{value:j},r.createElement(A.Provider,{value:i},r.createElement(le.Provider,{value:b.current},r.createElement(oe.Provider,{value:f},r.createElement(B,{basename:E,location:i.location,navigationType:i.historyAction,navigator:y},i.initialized?r.createElement(he,{routes:t.routes,state:i}):n))))),null)}function he(e){let{routes:n,state:t}=e;return W(n,void 0,t)}const pe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=r.forwardRef(function(n,t){let{onClick:a,relative:i,reloadDocument:s,replace:u,state:m,target:f,to:o,preventScrollReset:c,unstable_viewTransition:v}=n,d=te(n,re),{basename:T}=r.useContext(G),w,x=!1;if(typeof o=="string"&&me.test(o)&&(w=o,pe))try{let h=new URL(window.location.href),y=o.startsWith("//")?new URL(h.protocol+o):new URL(o),E=ee(y.pathname,T);y.origin===h.origin&&E!=null?o=E+y.search+y.hash:x=!0}catch{}let b=X(o,{relative:i}),k=ve(o,{replace:u,state:m,target:f,preventScrollReset:c,relative:i,unstable_viewTransition:v});function L(h){a&&a(h),h.defaultPrevented||k(h)}return r.createElement("a",C({},d,{href:w||b,onClick:x||s?a:L,ref:t,target:f}))});var F;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(F||(F={}));var I;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(I||(I={}));function ve(e,n){let{target:t,replace:a,state:i,preventScrollReset:s,relative:u,unstable_viewTransition:m}=n===void 0?{}:n,f=Y(),o=q(),c=J(e,{relative:u});return r.useCallback(v=>{if(ie(v,t)){v.preventDefault();let d=a!==void 0?a:U(o)===U(c);f(e,{replace:d,state:i,preventScrollReset:s,relative:u,unstable_viewTransition:m})}},[o,f,c,a,i,t,e,s,u,m])}export{be as L,Te as R,Se as c};
